(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{38:function(e,n,t){"use strict";t.r(n);var c=t(14),r=t.n(c),o=t(3),a=t(2),u=t(4),s=t.n(u),i="/api/persons",d=function(){return s.a.get(i).then((function(e){return e.data}))},l=function(e){return s.a.post(i,e).then((function(e){return e.data}))},h=function(e,n){return s.a.put("".concat(i,"/").concat(e),n).then((function(e){return e.data}))},b=function(e){return s.a.delete("".concat(i,"/").concat(e)).then((function(e){return e.data}))},j=t(0),f=function(e){var n=e.personClicked,t=e.persons,c=e.setPersons;return Object(j.jsx)("button",{type:"submit",onClick:function(e){e.preventDefault(),window.confirm("Delete ".concat(n.name,"?"))?b(n.id).then((function(){return c(t.filter((function(e){return e.id!==n.id})))})):alert("".concat(n.name," kept in phonebook"))},children:"delete"})},m=function(e){e.handleDeletion;var n=e.persons,t=e.search,c=e.setPersons;return(""===t?n:n.filter((function(e){return e.name.toLowerCase().startsWith(t.toLowerCase())}))).map((function(e){return Object(j.jsxs)("p",{children:[e.name," ",e.number," ",Object(j.jsx)(f,{personClicked:e,persons:n,setPersons:c})]},e.name)}))},O=function(e){var n=e.message,t={color:e.color,background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10};return null===n?null:Object(j.jsx)("div",{style:t,children:n})},p=function(e){return Object(j.jsx)("div",{children:Object(j.jsxs)("form",{onSubmit:e.addPerson,children:[Object(j.jsxs)("div",{children:["name: ",Object(j.jsx)("input",{value:e.newName,onChange:e.handleNameChange})]}),Object(j.jsxs)("div",{children:["number: ",Object(j.jsx)("input",{value:e.newNum,onChange:e.handleNumChange})]}),Object(j.jsx)("div",{children:Object(j.jsx)("button",{type:"submit",children:"add"})})]})})},g=function(e){var n=e.search,t=e.handleSearchChange;return Object(j.jsxs)("p",{children:["filter shown with",Object(j.jsx)("input",{value:n,onChange:t})]})},v=function(){var e=Object(a.useState)([]),n=Object(o.a)(e,2),t=n[0],c=n[1],r=Object(a.useState)(""),u=Object(o.a)(r,2),s=u[0],i=u[1],b=Object(a.useState)(""),f=Object(o.a)(b,2),v=f[0],x=f[1],w=Object(a.useState)(""),C=Object(o.a)(w,2),k=C[0],S=C[1],y=Object(a.useState)(null),N=Object(o.a)(y,2),P=N[0],D=N[1],T=Object(a.useState)("green"),B=Object(o.a)(T,2),E=B[0],I=B[1];Object(a.useEffect)((function(){d().then((function(e){c(e)}))}),[]);return Object(j.jsxs)("div",{children:[Object(j.jsx)("h2",{children:"Phonebook"}),Object(j.jsx)(O,{message:P,color:E}),Object(j.jsx)(g,{search:k,handleSearchChange:function(e){S(e.target.value)}}),Object(j.jsx)("h3",{children:"Add a new"}),Object(j.jsx)(p,{addPerson:function(e){e.preventDefault();var n={name:s,number:v},r=t.find((function(e){return e.name===n.name}));console.log(r),r?window.confirm("".concat(n.name," is already in the phonebook, replace the old number with a new one?"))?h(t.find((function(e){return e.name===n.name})).id,n).then((function(e){D("".concat(e.name,"'s number has been updated")),setTimeout((function(){D(null)}),5e3),c(t.filter((function(e){return e.number!==r.number})).concat(e)),i(""),x("")})).catch((function(e){I("red"),D("Information of ".concat(n.name," has already been removed from the server")),setTimeout((function(){I("green"),D(null)}),5e3)})):window.close():l(n).then((function(e){D("".concat(e.name," was successfully added to Phonebook")),setTimeout((function(){D(null)}),5e3),c(t.concat(e)),i(""),x("")}))},newName:s,newNum:v,handleNameChange:function(e){i(e.target.value)},handleNumChange:function(e){x(e.target.value)}}),Object(j.jsx)("h3",{children:"Numbers"}),Object(j.jsx)(m,{persons:t,search:k,setPersons:c})]})};r.a.render(Object(j.jsx)(v,{}),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.3f4d27d5.chunk.js.map